<!DOCTYPE html>
<!-- PyleaPocket – complete offline reference for PyleaMUN delegates -->
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <title>PyleaPocket – PyleaMUN Reference</title>
  <style>
    :root{
      --teal:#006d7c;
      --bg:#f7f9fa;
      --card:#ffffff;
      --border:#e2e8f0;
      --text:#111827;
      --shadow:0 2px 4px rgba(0,0,0,.06);
      --radius:.75rem;
    }
    *{box-sizing:border-box;margin:0;padding:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;}
    body{background:var(--bg);color:var(--text);line-height:1.5;}
    header{background:var(--card);padding:1rem .5rem 1rem;box-shadow:var(--shadow);display:flex;flex-direction:column;align-items:center;gap:1rem;}
    .branding{display:flex;align-items:center;gap:.75rem;flex-wrap:wrap;justify-content:center;}
    .branding img{width:110px;height:auto;border-radius:var(--radius);} 
    .branding .pocket{font-size:1.5rem;font-weight:700;color:var(--teal);white-space:nowrap;}
    nav{display:flex;flex-wrap:wrap;gap:.5rem;justify-content:center;width:100%;max-width:900px;}
    nav button{flex:1 1 120px;padding:.5rem;border:none;border-radius:var(--radius);background:var(--teal);color:#fff;font-weight:600;cursor:pointer;box-shadow:var(--shadow);} 
    nav button.active{outline:3px solid var(--teal);background:#014a58;}
    .ext-links{display:flex;flex-wrap:wrap;gap:.5rem;justify-content:center;width:100%;max-width:900px;}
    .ext-btn{flex:1 1 200px;padding:.5rem 1rem;text-align:center;text-decoration:none;border-radius:var(--radius);background:#0a9396;color:#fff;font-weight:600;box-shadow:var(--shadow);} 
    .ext-btn:hover{background:#08767b;}
    main{max-width:900px;margin:0 auto;padding:1rem;}
    section{display:none;animation:fade .2s ease-in-out;}
    section.active{display:block;}
    @keyframes fade{from{opacity:0;}to{opacity:1;}}
    h2{font-size:1.25rem;color:var(--teal);margin-bottom:.5rem;}
    .details{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);padding:.75rem;margin:.5rem 0;box-shadow:var(--shadow);} 
    .clause-list button{display:block;width:100%;text-align:left;padding:.25rem 0;background:none;border:none;color:var(--teal);cursor:pointer;}
    .clause-list button:hover{background:rgba(0,109,124,.1);} 
    .document{white-space:pre-wrap;max-height:70vh;overflow-y:auto;border:1px solid var(--border);border-radius:var(--radius);padding:1rem;background:var(--card);} 
    input[type="search"],select{width:100%;padding:.5rem;margin:.5rem 0;border:1px solid var(--border);border-radius:var(--radius);} 
    .country-card{border:1px solid var(--border);border-radius:var(--radius);padding:.75rem;margin:.25rem 0;background:var(--card);box-shadow:var(--shadow);} 
    .country-card h3{color:var(--teal);} 
    .news-item{margin:.5rem 0;} .news-item a{color:var(--teal);font-weight:600;text-decoration:none;} 
    .map-wrapper img,.unsys-wrapper img{width:100%;height:auto;border:1px solid var(--border);border-radius:var(--radius);box-shadow:var(--shadow);} 
    footer{font-size:.8rem;color:#6b7280;text-align:center;padding:1rem;}
  </style>
</head>
<body>
<header>
  <div class="branding">
    <span class="pocket">PyleaPocket</span>
    <img src="pyleaMUNfinallogo.png" alt="PyleaMUN logo">
    <span class="pocket">PyleaPocket</span>
  </div>
  <nav id="nav">
    <button data-target="clauses" class="active">Clauses</button>
    <button data-target="charter">UN Charter</button>
    <button data-target="udhr">UDHR</button>
    <button data-target="factbook">Factbook</button>
    <button data-target="map">World&nbsp;Map</button>
    <button data-target="unsystem">UN&nbsp;System</button>
    <button data-target="news">UN&nbsp;News</button>
    <button data-target="ngos">NGOs</button>
  </nav>
  <div class="ext-links">
    <a class="ext-btn" href="https://panagiotis-domvros.github.io/position-paper/" target="_blank" rel="noopener noreferrer">Position Paper Builder</a>
    <a class="ext-btn" href="https://panagiotis-domvros.github.io/draft-resolution/" target="_blank" rel="noopener noreferrer">Draft Resolution Builder</a>
  </div>
</header>
<main>
  <section id="clauses" class="active">
    <h2>Resolution Clause Bank</h2>
    <div class="details">
      <h3>Preambulatory Clauses</h3>
      <div class="clause-list" id="preList"></div>
    </div>
    <div class="details">
      <h3>Operative Clauses</h3>
      <div class="clause-list" id="opList"></div>
    </div>
    <p style="font-size:.9rem;margin-top:.5rem;">Tap a clause to copy it to your clipboard.</p>
  </section>

  <section id="charter">
    <h2>Charter of the United Nations</h2>
    <input type="search" id="charterSearch" placeholder="Search the Charter…">
    <div class="document" id="charterDoc">Loading… (requires first-time internet)</div>
  </section>

  <section id="udhr">
    <h2>Universal Declaration of Human Rights</h2>
    <input type="search" id="udhrSearch" placeholder="Search the UDHR…">
    <div class="document" id="udhrDoc">Loading… (requires first-time internet)</div>
  </section>

  <section id="factbook">
    <h2>Country Factbook</h2>
    <input type="search" id="factSearch" placeholder="Search country name…">
    <div id="factResults"></div>
  </section>

  <section id="map">
    <h2>Political World Map</h2>
    <div class="map-wrapper"><img id="worldMap" alt="World map" src="data:image/png;base64,{{WORLD_MAP_B64}}"></div>
    <p style="font-size:.8rem;">Pinch-zoom on mobile. Map data: Natural Earth 2024.</p>
  </section>

  <section id="unsystem">
    <h2>UN System Chart</h2>
    <div class="unsys-wrapper"><img id="unChart" alt="UN system chart" src="data:image/png;base64,{{UN_CHART_B64}}"></div>
  </section>

  <section id="news">
    <h2>Latest UN News</h2>
    <button id="refreshNews" style="margin-bottom:.5rem;padding:.25rem .75rem;border-radius:var(--radius);border:1px solid var(--border);background:var(--card);color:var(--teal);">Refresh</button>
    <div id="newsFeed">Loading…</div>
  </section>

  <section id="ngos">
    <h2>NGO Directory</h2>
    <input type="search" id="ngoSearch" placeholder="Search NGOs…">
    <select id="ngoRegion"><option value="">All Regions</option></select>
    <div id="ngoResults"></div>
  </section>
</main>
<footer>PyleaPocket &copy; 2025 – works offline after first load. Data sources: United Nations, Natural Earth, REST Countries, Idealist.org.</footer>

<script>
/**********************
 * SPA Navigation      */
const nav=document.getElementById('nav');
nav.addEventListener('click',e=>{
  if(e.target.tagName!=='BUTTON')return;
  const tgt=e.target.dataset.target;
  [...nav.children].forEach(btn=>btn.classList.toggle('active',btn.dataset.target===tgt));
  document.querySelectorAll('main section').forEach(sec=>sec.classList.toggle('active',sec.id===tgt));
});

/**********************
 * Clause lists        */
const preClauses=["Affirming","Alarmed by","Approving","Aware of","Bearing in mind","Believing","Confident","Contemplating","Convinced","Declaring","Deeply concerned","Deeply conscious","Deeply disturbed","Deeply regretting","Desiring","Emphasizing","Expecting","Expressing its appreciation","Fulfilling","Fully aware","Fully believing","Further recalling","Gravely concerned","Having adopted","Having considered","Having examined","Having heard","Having received","Having studied","Keeping in mind","Mindful","Noting with approval","Noting with deep concern","Noting further","Noting with regret","Noting with satisfaction","Observing","Pointing out","Reaffirming","Recalling","Recognizing","Referring","Seeking","Taking into account","Taking note","Viewing with appreciation","Welcoming"];
const opClauses=["Accepts","Affirms","Approves","Authorizes","Calls","Calls upon","Condemns","Confirms","Congratulates","Considers","Declares accordingly","Deplores","Designates","Draws attention","Emphasizes","Encourages","Endorses","Expresses its appreciation","Expresses its hope","Further invites","Further proclaims","Further recommends","Further reminds","Further requests","Further resolves","Has resolved","Notes","Proclaims","Reaffirms","Recommends","Regrets","Reminds","Requests","Solemnly affirms","Strongly condemns","Supports","Takes note of","Transmits","Trusts"];
function renderClauses(arr,id){const el=document.getElementById(id);arr.forEach(text=>{const btn=document.createElement('button');btn.textContent=text;btn.addEventListener('click',()=>navigator.clipboard.writeText(text+", "));el.appendChild(btn);});}
renderClauses(preClauses,'preList');
renderClauses(opClauses,'opList');

/**********************
 * Fetch + cache util  */
const DAY=86_400_000;
async function fetchCached(key,url,parse=x=>x){const ts=localStorage.getItem(key+':ts');if(ts && Date.now()-ts<DAY*30){const cached=localStorage.getItem(key);if(cached)return JSON.parse(cached);}const res=await fetch(url);if(!res.ok)throw new Error('network');const raw=await res.text();const data=parse(raw);localStorage.setItem(key,JSON.stringify(data));localStorage.setItem(key+':ts',Date.now());return data;}

/**********************
 * UN texts            */
(async()=>{
  const charterBox=document.getElementById('charterDoc');
  const udhrBox=document.getElementById('udhrDoc');
  try{
    charterBox.textContent='Downloading…';
    const charter=await fetchCached('charter','https://raw.githubusercontent.com/datasets/un-charter/master/charter.txt',t=>t);
    charterBox.textContent=charter;
    const udhr=await fetchCached('udhr','https://raw.githubusercontent.com/datasets/udhr/master/udhr_english.txt',t=>t);
    udhrBox.textContent=udhr;
  }catch(err){charterBox.textContent=udhrBox.textContent='❗ First load requires internet.';}
})();
// simple highlighter
function attachSearch(inputId,docId){const inp=document.getElementById(inputId);const box=document.getElementById(docId);let original='';inp.addEventListener('focus',()=>{if(!original)original=box.textContent;});inp.addEventListener('input',()=>{const q=inp.value.trim().toLowerCase();if(!q){box.innerHTML=original;return;}const re=new RegExp(q.replace(/[-/\\^$*+?.()|[\]{}]/g,'\\$&'),'gi');box.innerHTML=original.replace(re,m=>`<mark>${m}</mark>`);} );}
attachSearch('charterSearch','charterDoc');
attachSearch('udhrSearch','udhrDoc');

/**********************
 * Factbook           */
(async()=>{
  const box=document.getElementById('factResults');const search=document.getElementById('factSearch');
  try{
    const countries=await fetchCached('countries','https://restcountries.com/v3.1/all',raw=>JSON.parse(raw).map(c=>({name:c.name.common,pop:c.population,area:c.area,capital:(c.capital||[''])[0],region:c.region,flag:c.flag})));
    const render=q=>{box.innerHTML='';countries.filter(c=>c.name.toLowerCase().includes(q.toLowerCase())).sort((a,b)=>a.name.localeCompare(b.name)).forEach(c=>{const div=document.createElement('div');div.className='country-card';div.innerHTML=`<h3>${c.flag} ${c.name}</h3><p><strong>Capital:</strong> ${c.capital||'—'}</p><p><strong>Region:</strong> ${c.region}</p><p><strong>Population:</strong> ${c.pop.toLocaleString()}</p><p><strong>Area:</strong> ${c.area.toLocaleString()} km²</p>`;box.appendChild(div);});};
    render('');search.addEventListener('input',e=>render(e.target.value));
  }catch(err){box.textContent='❗ Internet needed on first load.';}
})();

/**********************
 * UN News            */
(async()=>{
  const feed=document.getElementById('newsFeed');const btn=document.getElementById('refreshNews');
  async function load(force){if(!force){const cached=localStorage.getItem('newsHTML');if(cached){feed.innerHTML=cached;return;}}
    try{
      const txt=await (await fetch('https://news.un.org/feed/subscribe/en/news/all/rss.xml')).text();
      const xml=new DOMParser().parseFromString(txt,'application/xml');
      const items=[...xml.querySelectorAll('item')].slice(0,20).map(i=>({title:i.querySelector('title').textContent,link:i.querySelector('link').textContent,date:new Date(i.querySelector('pubDate').textContent)}));
      feed.innerHTML='';items.forEach(i=>{const div=document.createElement('div');div.className='news-item';div.innerHTML=`<a href='${i.link}' target='_blank'>${i.title}</a><br><small>${i.date.toLocaleString()}</small>`;feed.appendChild(div);});
      localStorage.setItem('newsHTML',feed.innerHTML);
    }catch(err){feed.textContent='❗ Cannot fetch feed.';}}
  btn.addEventListener('click',()=>load(true));
  load();
})();

/**********************
 * NGO directory      */
(async()=>{
  const box=document.getElementById('ngoResults');const search=document.getElementById('ngoSearch');const regionSel=document.getElementById('ngoRegion');
  try{
    const ngos=await fetchCached('ngos','https://raw.githubusercontent.com/peacecorps/global-ngos/master/ngos.json',raw=>JSON.parse(raw));
    const regions=[...new Set(ngos.map(n=>n.region).filter(Boolean))].sort();regions.forEach(r=>{const opt=document.createElement('option');opt.value=r;opt.textContent=r;regionSel.appendChild(opt);});
    const render=()=>{const q=search.value.toLowerCase();const reg=regionSel.value;box.innerHTML='';ngos.filter(n=>(!q||n.name.toLowerCase().includes(q))&&(!reg||n.region===reg)).slice(0,200).forEach(n=>{const div=document.createElement('div');div.className='country-card';div.innerHTML=`<h3>${n.name}</h3><p><em>${n.region}</em></p><p>${n.description||''}</p>`;box.appendChild(div);});};
    render();search.addEventListener('input',render);regionSel.addEventListener('change',render);
  }catch(err){box.textContent='❗ NGO list needs internet on first load.';}
})();

/**********************
 * Service worker     */
if('serviceWorker' in navigator){navigator.serviceWorker.register(URL.createObjectURL(new Blob([`const CACHE='pyleapocket-v1';self.addEventListener('install',e=>e.waitUntil(caches.open(CACHE).then(c=>c.addAll(['./']))));self.addEventListener('fetch',e=>e.respondWith(caches.match(e.request).then(r=>r||fetch(e.request))));`],{type:'text/javascript'}))).catch(console.error);} 
</script>
</body>
</html>